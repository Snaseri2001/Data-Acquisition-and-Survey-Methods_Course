library(rvest)
library(rvest)
install.packages("rvest")
install.packages("rvest", dependencies=TRUE)
library(rvest)
options(download.file.method = "libcurl")
install.packages("rvest")
packageVersion("rvest")
packageVersion(rvest)
library("rvest")
library(rvest)
source("~/Desktop/Files/Kurses/Data Acquisition and Survey Methods/Data-Acquisition-and-Survey-Methods_Course/Assignment1/Web_Scraping.R")
install.packages("devtools")
devtools::install_github("tidyverse/rvest")
library(rvest)
library("rvest")
install.packages("xml2")
library("xml2")
library(xml2)
library('xml2')
library("rvest")
main_html
main_html = read_html("Weather for Sari, Iran.html")
main_html
main_table = main_html %>% html_elements(xpath = "*[html_text() = "Forecast for the next 48 hours"]")
main_table <- main_html %>% html_elements(xpath = "*[html_text() = "Forecast for the next 48 hours"]")
main_table <- main_html %>% html_elements(xpath = "//*[html_text() = "Forecast for the next 48 hours"]")
main_table <- main_html %>% html_elements(xpath = '//*[html_text() = "Forecast for the next 48 hours"]')
main_table <- main_html %>% html_elements(xpath = '//*[text() = "Forecast for the next 48 hours"]')
main table
main_table
main_table <- main_html %>% html_elements(xpath = '//*[text() = "Forecast for the next 48 hours"]//table')
main_table
main_table <- main_html %>% html_elements(xpath = '//*[text() = "Forecast for the next 48 hours"]//*')
main_table
main_table <- main_html %>% html_elements(xpath = '//*[text() = "Forecast for the next 48 hours"]//*') %>% html_elements(xpath = "..")
main_table
main_table <- main_html %>% html_elements(xpath = '//*[text() = "Forecast for the next 48 hours"]//*') %>% html_elements(xpath = '..')
main_table
main_table <- main_html %>% html_elements(xpath = '//*[text() = "Forecast for the next 48 hours"]') %>% html_elements(xpath = '..')
main_table
selected_section <- main_html %>% html_elements(xpath = '//*[text() = "Forecast for the next 48 hours"]') %>% html_elements(xpath = '..')
selected_section
main_table <- selected_section %>% html_elements(xpath = '/table')
main_table
main_table <- selected_section %>% html_elements(xpath = '//table')
main_table
main_table <- selected_section %>% html_elements(xpath = '//table[first-child]')
main_table
main_table <- selected_section %>% html_elements(xpath = '//table[position() = 1]')
main_table
selected_section
main_table <- selected_section %>% html_elements(xpath = '//table[position() = 1]')
main_table
main_table <- selected_section %>% html_elements(xpath = './/table[position() = 1]')
main_table
information <- main_table %>% html_elements(xpath = './/tr')
information
text <- information %>% html_table()
text
text = main_table %>% html_table()
text
information
print(information)
information = main_table %>% html_table()
print(information)
main_table <- main_table %>% html_elements(xpath = ".//tr[not(.//img)]")
information = main_table %>% html_table()
print(information)
main_table <- selected_section %>% html_elements(xpath = './/table[position() = 1]')
information
library("rvest")
information = rows %>% html_table()
rows <- main_table %>% html_elements(xpath = './/tr[not(.//img)]')
information
information = rows %>% html_table(trim = TRUE)
main_table <- selected_section %>% html_elements(xpath = './/table[position() = 1]')
information
information = rows %>% html_table()
main_table
rows
information = rows %>% html_table()
print(information)
selected_section <- main_html %>% html_elements(xpath = '//*[text() = "Forecast for the next 48 hours"]') %>% html_elements(xpath = '..')
main_table <- selected_section %>% html_elements(xpath = './/table[position() = 1]')
information
information = main_table %>% html_table()
print(information)
information = main_table %>% html_table()
print(information)
selected_section_haourly <- hourly_data_html %>% html_elements(xpath = '//*[text() = "Detailed Hourly Forecast"]')
selected_section_haourly
selected_section_haourly = hourly_data_html %>% html_elements(xpath = '//*[text() = "Detailed Hourly Forecast"]')%>% html_elements(xpath = '..')
print(information)
selected_section_haourly
selected_section_haourly <- hourly_data_html %>% html_elements(xpath = '//*[text() = "Detailed Hourly Forecast"]')%>% html_elements(xpath = '..')
selected_section_haourly <- hourly_data_html %>% html_elements(xpath = '//*[text() = "Detailed Hourly Forecast"]')
selected_section_haourly
selected_section_haourly = hourly_data_html %>% html_elements(xpath = '//*[text() = "Detailed Hourly Forecast"]')
selected_section_haourly
selected_section_hourly = hourly_data_html %>% html_elements(xpath = '//*[text() = "Detailed Hourly Forecast"]')
selected_section_hourly
selected_section_hourly <- hourly_data_html %>% html_elements(xpath = '//*[text() = "Detailed Hourly Forecast"]')
selected_section_hourly = hourly_data_html %>% html_elements(xpath = '//*[text() = "Detailed Hourly Forecast"]')
selected_section_hourly
hourly_data_html <- read_html("Hourly forecast for Sari,Iran.html")
selected_section_hourly = hourly_data_html %>% html_elements(xpath = '//*[text() = "Detailed Hourly Forecast"]')
selected_section_hourly <- hourly_data_html %>% html_elements(xpath = '//*[text() = "Detailed Hourly Forecast"]')
selected_section_hourly
selected_section_hourly <- hourly_data_html %>% html_elements(xpath = '//*[text() = "Detailed Hourly Forecast &mdash; Next 24 hours"]')
selected_section_hourly
selected_section_hourly <- hourly_data_html %>% html_elements(xpath = '//*[text() = "xpath = '//*[text() = "Detailed Hourly Forecast — Next 24 hours"]'"]')
selected_section_hourly <- hourly_data_html %>% html_elements(xpath = '//*[text() = //*[text() = "Detailed Hourly Forecast — Next 24 hours"]'"]')
selected_section_hourly <- hourly_data_html %>% html_elements(xpath = '//*[text() = //*[text() = "Detailed Hourly Forecast — Next 24 hours"]"]')
selected_section_hourly
selected_section_hourly = hourly_data_html %>% html_elements(xpath = '//*[text() = //*[text() = "Detailed Hourly Forecast — Next 24 hours"]"]')
selected_section_hourly
selected_section_hourly = hourly_data_html %>% html_elements(xpath = '//*[text() = "Detailed Hourly Forecast — Next 24 hours"]"]')
hourly_data_html
hourly_data_html <- read_html("Hourly forecast for Sari, Iran.html")
selected_section_hourly
hourly_data_html <- read_html("Hourly forecast for Sari, Iran.html")
selected_section_hourly = hourly_data_html %>% html_elements(xpath = '//*[text() = "Detailed Hourly Forecast — Next 24 hours"]"]')
selected_section_hourly
hourly_data_html <- read_html('Hourly forecast for Sari, Iran.html')
selected_section <- main_html %>% html_elements(xpath = '//*[text() = "Forecast for the next 48 hours"]') %>% html_elements(xpath = '..')
library("rvest")
library("rvest")
library("rvest")
selected_section_hourly
information
hourly_data_html
hourly_data_html <- read_html('Hourly forecast for Sari, Iran.html')
hourly_data_html
selected_section_hourly
selected_section_hourly = hourly_data_html %>% html_elements(xpath = '//*[text() = "Detailed Hourly Forecast"]"]')
selected_section_hourly
selected_section_hourly = hourly_data_html %>% html_elements(xpath = '//*[text() = "Detailed Hourly Forecast &mdash; Next 24 hours"]"]')
selected_section_hourly
selected_section_hourly = hourly_data_html %>% html_elements(xpath = '//*[html_text() = "Detailed Hourly Forecast &mdash; Next 24 hours"]"]')
selected_section_hourly
selected_section_hourly = hourly_data_html %>% html_elements(xpath = '//*[@id= "Detailed Hourly Forecast &mdash; Next 24 hours"]')
selected_section_hourly
selected_section_hourly = hourly_data_html %>% html_elements(xpath = '//*[text()= "Detailed Hourly Forecast &mdash; Next 24 hours"]')
selected_section_hourly
selected_section_hourly = hourly_data_html %>% html_elements(xpath = '//*[@id= wt-hbh-title]')
selected_section_hourly
selected_section_hourly = hourly_data_html %>% html_elements(xpath = '//*[@id= "wt-hbh-title"]')
hourly_data_html
selected_section_hourly
selected_section_hourly = hourly_data_html %>% html_elements(xpath = '//*[@id= "wt-hbh-title"]') %>% html_elements(xpath = '..')
selected_section_hourly
main_hourly_table <- selected_section_hourly %>% html_elements(xpath = './/table[position() = 1]')
main_hourly_table
hourly_information = main_hourly_table %>% html_table()
hourly_information
class(hourly_information)
list[1]
list(1)
hourly_information[1]
hourly_information[1 , 1]
hourly_information[c(1 , 2)]
hourly_information[7]
size(hourly_information)
hourly_information$Time
hourly_information$time
hourly_information[[2]]
hourly_information[[time]]
hourly_information[[Time]]
hourly_information[["Time"]]
hourly_information[["condition"]]
hourly_information[["Conditions"]]
hourly_information[["Temp"]]
hourly_information["Temp"]
hourly_information[Temp]
hourly_information["Conditions"]
hourly_information["Precipitation"]
hourly_information[["Precipitation"]]
hourly_information
View(hourly_information)
View(hourly_information)
hourly_information[[1]]
hourly_information[[1]][["Conditions"]]
hourly_information[[1]][["Time"]]
hourly_information[[1]][["Conditions"]][["Timr"]]
hourly_information[[1]][["Conditions"]][["Time"]]
hourly_information[[1]][["Conditions"]][[2]]
hourly_information[[1]][["Conditions"]][[4]]
hourly_information[[1]][["Conditions"]]
hourly_information[[1]][[1]]
hourly_information[[1]][["Conditions"]]
hourly_information[[1]][["Conditions"]]
hourly_information <- hourly_information[-1 , ]
dim(hourly_information)
length(hourly_information)
main_hourly_rows
main_hourly_rows <- selected_section_hourly %>% html_elements(xpath = './/table[position() = 1]//tr[position() > 1]')
main_hourly_rows
table <- main_hourly_rows %>%
lapply(function(row) {
row %>% html_elements("td") %>% html_text()
}) %>%
do.call(rbind, .) %>%
as.data.frame()
table
hourly_data_html <- read_html('Hourly forecast for Sari, Iran.html')
table
table <- main_hourly_rows %>%
lapply(function(row) {
row %>% html_elements("td") %>% html_text()
}) %>% do.call(rbind, .) %>% as.data.frame(colnames(c("Temp" , 	"Weather",	"Feels" , "Like" ,	"Wind" ,	 	"Humidity" ,	"Chance")))
table
table <- main_hourly_rows %>%
lapply(function(row) {
row %>% html_elements("td") %>% html_text()
}) %>% do.call(rbind, .) %>% as.data.frame(col_names(c("Temp" , 	"Weather",	"Feels" , "Like" ,	"Wind" ,	 	"Humidity" ,	"Chance")))
colnames(table) <- c("Temp" , 	"Weather",	"Feels" , "Like" ,	"Wind" ,	 	"Humidity" ,	"Chance")
table
colnames(table) <- c( "Conditions" ,"Temp" , 	"Weather",	"Feels" , "Like" ,	"Wind" ,	 	"Humidity" ,	"Chance" , "Amount")
table
table["Amount"]
table["Temp"]
table["Temp"][1]
table["Temp"][2]
table["Temp",1]
table["Temp",2]
table[2 , "Temp"]
table[2 , "Humidity"]
Humidity <- gsub("%", "", table["Humidity"])
Humidity
Humidity <- as.numeric(Humidity)
Humidity
Humidity <- gsub("%", "", "45%")
Humidity
Humidity <- gsub("%", "", table[1 : -1"Humidity"])
Humidity <- gsub("%", "", table[1 : -1 , "Humidity"])
Humidity <- gsub("%", "", table[1 :26 , "Humidity"])
Humidity
Humidity <- gsub("%", "", table[1 :24 , "Humidity"])
Humidity
Humidity <- gsub("%", "", table[1 :23 , "Humidity"])
Humidity
Humidity <- as.numeric(Humidity)
Humidity
class(Humidity)
Humidity[3]
Feels
Temp
Temp <- gsub(" °C", "", table[1 :23 , "Temp"])
Feels
Humidity
Temp
Feels <- gsub(" °C", "", table[1 :23 , "Feels"])
Feels
Temp <- gsub("°C", "", table[1 :23 , "Temp"])
Feels
Temp
Feels
Humidity
Temp
Feels
Finla_Feels <- as.numeric(Feels)
Finla_Feels
Final_Temp
Final_Temp
Final_Temp
Humidity
Feels <- gsub("°C", "", table[1 :23 , "Feels"])
Finla <- as.numeric(Feels)
table[1 :23 , "Feels"]
Feels <- gsub("°C", "", table[1 :23 , "Feels"])
Finla <- as.numeric(Feels)
Feels <- gsub("°C", "", table[1 :23 , "Feels"])
Feels <- as.numeric(Feels)
Feels
Feels <- gsub(" °C", "", table[1 :23 , "Feels"])
Feels <- as.numeric(Feels)
Feels
Feels <- gsub(" °C", "", table[1 :23 , "Feels"])
Feels <- as.numeric(Feels)
Feels <- gsub("°C", "", table[1 :23 , "Feels"])
Feels <- as.numeric(Feels)
Feels <- gsub("°C", "", table[1 :23 , "Feels"])
Feels
Feels <- as.numeric(Feels)
Feels
Feels <- gsub(" °C", "", table[1 :23 , "Feels"])
Feels
Temp <- sub("°C", "", table[1 :23 , "Temp"])
Temp <- as.numeric(Temp)
Feels
Temp
Temp <- sub(" °C", "", table[1 :23 , "Temp"])
Temp
Temp
Temp <- gsub(" °C", "", table[1 :23 , "Temp"])
Temp
Temp <- gsub("°C", "", table[1 :23 , "Temp"])
Temp
Temp <- gsub(" ", "", table[1 :23 , "Temp"])
Temp
Temp <- gsub("°C", "", table[1 :23 , "Temp"])
Temp
Temp <- gsub(" ", "", Temp)
Temp
Temp <- gsub("  ", "", Temp)
Temp
Tempo = trimws(Tempo)
Temp = trimws(Temp)
Temp
Temp = trimws(Temp , , which = "right")
Temp
Temp = trimws(Temp , which = "right")
Temp
u = "56 °C"
u
u = gsub(" °C" , "" , u)
u
v = gsub(" °C" , "" , Temp)
v
Temp <- sub("", "", table[1 :23 , "Temp"])
Temp
h = gsub(" °C" , "" , Temp)
h
h = gsub(" °C" , "" , c(Temp)
h = gsub(" °C" , "" , c(Temp)
h = gsub(" °C" , "" , c(Temp))
h
h = gsub(" °C" , "" , list(Temp))
h
h = gsub(" °C" , "" , Temp)
h
h = gsub("°C" , "" , Temp)
h
h = gsub("°C" , "" , "17 °C")
h
h = gsub("°C" , "" , "33 °C")
h
